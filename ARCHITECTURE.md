# üèóÔ∏è Architecture du Projet - Blood Donation App

## Vue d'ensemble de l'Architecture

L'application Blood Donation App suit une architecture modulaire bas√©e sur le pattern **Feature-First** avec une s√©paration claire des responsabilit√©s. Cette approche facilite la maintenance, les tests et l'√©volutivit√© du code.

## üìä Diagramme d'Architecture

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    SCREENS LAYER                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  Screens  ‚îÇ  Widgets  ‚îÇ  Routes  ‚îÇ  Theme  ‚îÇ  Controllers   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                     BUSINESS LAYER                          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ           Services  ‚îÇ  Models  ‚îÇ  Repositories              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                      DATA LAYER                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ     API Client  ‚îÇ  Local Storage  ‚îÇ  Network Manager        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîß Couches de l'Architecture

### 1. **Screens Layer** (`lib/screens/`)

Cette couche g√®re l'interface utilisateur et les interactions. Elle est organis√©e par fonctionnalit√©s :

#### Fonctionnalit√©s Principales :

##### üîê **Authentication & Onboarding**

- `welcomeScreen/onboarding_screen.dart` - √âcran d'accueil
- `missionOverviewScreen/onboarding_two_screen.dart` - Pr√©sentation de la mission
- `gettingStartedScreen/onboarding_three_screen.dart` - Introduction √† l'app
- `authentication_screen/authentication_screen.dart` - Connexion utilisateur
- `account_registration_screen/account_registration_screen.dart` - Inscription

##### üë§ **Profile Management**

- `donorProfileSetupScreen/donorProfileSetupScreen.dart` - Configuration du profil donneur (legacy)
- `blood_donation_profile_setup/blood_donation_profile_setup.dart` - Configuration avanc√©e du profil
- `digital_donor_card/digital_donor_card.dart` - Carte num√©rique du donneur
- `profile_screen/profile_screen.dart` - Gestion du profil utilisateur
- `api_config_screen/api_config_screen.dart` - Configuration de l'URL API

##### üè• **Blood Donation Management**

- `blood_donation_menu_screen/blood_donation_menu_screen.dart` - Menu principal des dons
- `donors_list_screen/donors_list_screen.dart` - Liste des donneurs
- `create_donor_screen/create_donor_screen.dart` - Cr√©ation de nouveaux donneurs

##### üéØ **Campaigns & Centers**

- `donation_campaign_list_screen/donation_campaign_list_screen.dart` - Liste des campagnes
- `blood_collection_centers_locator/blood_collection_centers_locator.dart` - Localisation des centres

##### üèÜ **Tracking & Rewards**

- `badges_management_screen/badges_management_screen.dart` - Gestion des badges
- `test_results_history_page/test_results_history_page.dart` - Historique des tests
- `blood_volume_visualization/blood_volume_screen.dart` - Visualisation des dons

##### üì± **Communication & Services**

- `notifications_screen/notifications_screen.dart` - Gestion des notifications
- `appointments_screen/appointments_screen.dart` - Gestion des rendez-vous

### 2. **Business Layer** (`lib/services/`)

Cette couche contient la logique m√©tier et les services :

#### Services principaux

**`api_service.dart`** - Service API Principal avec endpoints complets

```dart
class ApiService {
  // Configuration dynamique via AppConfig
  static String get baseUrl => AppConfig.apiBaseUrl;
  static Map<String, String> get defaultHeaders => AppConfig.defaultHeaders;

  // Authentification avanc√©e
  Future<Map<String, dynamic>?> login(String email, String password)
  Future<Map<String, dynamic>?> registerUnified({...})  // Inscription compl√®te
  static Future<Map<String, dynamic>> refreshToken(String refreshToken)
  Future<Map<String, dynamic>?> getCurrentUser(String token)
  Future<Map<String, dynamic>?> completeProfile({...})

  // Gestion compl√®te des Donneurs
  Future<List<dynamic>?> getDonneurs(String token)
  Future<Map<String, dynamic>?> createDonneur(...)
  Future<Map<String, dynamic>?> updateDonneur(...)
  Future<List<dynamic>?> searchDonneurByName(...)
  Future<bool> enregistrerDon(String token, int donneurId, double litres)

  // Syst√®me de Badges et R√©compenses
  Future<List<dynamic>?> getBadges(String token)
  Future<dynamic> genererBadge(String token, int donneurId)  // Support PDF

  // Gestion des Analyses M√©dicales
  Future<List<dynamic>?> getResultatsAnalyse(String token)
  Future<Map<String, dynamic>?> ajouterResultatAnalyse(...)
  Future<bool> verifierAnalyse(...)  // Staff uniquement
  Future<Map<String, dynamic>?> envoyerResultatsVerifies(String token)

  // Campagnes et Centres
  Future<List<dynamic>?> getCampagnes()
  Future<List<dynamic>?> getCampagnesUrgentes()
  Future<bool> inscrireCampagne(String token, int campagneId)
  Future<List<dynamic>?> getCentres()
  Future<List<dynamic>?> getCentresProches(double latitude, double longitude)

  // Syst√®me de Notifications
  Future<List<Map<String, dynamic>>?> getNotifications(String token)
  Future<bool> marquerNotificationLue(...)
  Future<bool> marquerToutesNotificationsLues(String token)
  Future<bool> supprimerNotification(...)
}
```

**`auth_service.dart`** - Service d'authentification JWT avanc√©

```dart
class AuthService {
  // Gestion des sessions
  static Future<bool> isLoggedIn()
  static Future<bool> login(String email, String password)
  static Future<String?> getValidAccessToken()  // Auto-refresh
  static Future<bool> refreshAccessToken()
  static Future<void> logout()
  
  // Navigation intelligente
  static Future<String> getInitialRoute()  // D√©termine la route selon l'√©tat auth
  
  // Gestion des donn√©es utilisateur
  static Future<Map<String, dynamic>?> getUserData()
  static Future<Map<String, dynamic>?> getDonorData()
  static Future<int?> getDonorId()
  static Future<bool> hasDonorProfile()
  static Future<bool> isStaff()
}
```

**Services additionnels :**

- **`notification_service.dart`** : Gestion des notifications push
- **`registration_data_service.dart`** : Service de donn√©es d'inscription
- **`api_test_service.dart`** : Service de tests et debugging API

### 3. **Core Layer** (`lib/core/`)

Contient les utilitaires et configurations partag√©s :

#### `config/app_config.dart` - Configuration des environnements

```dart
class AppConfig {
  static Future<void> initialize() async => await dotenv.load(fileName: '.env');
  
  // Configuration dynamique
  static String get apiBaseUrl => dotenv.env['API_BASE_URL'] ?? 'http://127.0.0.1:8000/api';
  static bool get enableLogging => dotenv.env['ENABLE_LOGGING']?.toLowerCase() == 'true';
  static Map<String, String> get defaultHeaders => {
    'Content-Type': 'application/json',
    'Accept': 'application/json',
    'X-API-Version': apiVersion,
  };
  
  // D√©tection d'environnement
  static bool get isProduction => apiBaseUrl.contains('https://');
  static bool get isDevelopment => apiBaseUrl.contains('127.0.0.1') || apiBaseUrl.contains('localhost');
}
```

#### `navigation_helper.dart` - Helper de navigation et protection des routes

```dart
class NavigationHelper {
  static Future<String> getInitialRoute() async {
    // D√©termine la route initiale selon l'√©tat d'authentification
  }
  
  static bool isProtectedRoute(String routeName) {
    // V√©rifie si une route n√©cessite une authentification
  }
}
```

**Autres composants :**

- **app_export.dart** : Centralise les imports
- **constants/app_constants.dart** : Constantes globales
- **utils/** : Fonctions utilitaires communes (image_constant, size_utils)

### 4. **UI Components** (`lib/widgets/`)

Composants r√©utilisables pour assurer la coh√©rence de l'interface :

#### Composants de base
- **custom_button.dart** : Boutons standardis√©s avec styles coh√©rents
- **custom_text_input.dart** : Champs de saisie avec validation int√©gr√©e
- **custom_image_view.dart** : Gestion optimis√©e des images avec cache
- **custom_input_field.dart** : Champs d'entr√©e sp√©cialis√©s
- **custom_bottom_navigation.dart** : Navigation par onglets

#### Composants avanc√©s
- **modern_app_bar.dart** : Barre d'application moderne et responsive
- **auth_guard.dart** : Composant de protection des routes avec `ProtectedRoute`
- **state_wrapper.dart** : Wrapper pour la gestion d'√©tat globale

#### Protection des routes

Le syst√®me `auth_guard.dart` impl√©mente un syst√®me de protection automatique :

```dart
class ProtectedRoute extends StatelessWidget {
  final String routeName;
  final Widget child;
  
  // V√©rifie automatiquement l'authentification
  // Redirige vers login si non connect√©
  // G√®re les √©tats de chargement
}
```

### 5. **Navigation** (`lib/routes/`)

Gestion centralis√©e de la navigation avec protection automatique :

```dart
class AppRoutes {
  // Routes d'onboarding
  static const String gettingStartedScreen = '/onboarding_three_screen';
  static const String missionOverviewScreen = '/onboarding_two_screen';
  static const String welcomeScreen = '/onboarding_screen';
  
  // Routes d'authentification
  static const String authenticationScreen = '/authentication_screen';
  static const String accountRegistrationScreen = '/account_registration_screen';
  
  // Routes principales (prot√©g√©es)
  static const String bloodDonationMenuScreen = '/blood_donation_menu_screen';
  static const String digitalDonorCard = '/digital-donor-card';
  static const String profileScreen = '/profile_screen';
  static const String notificationsScreen = '/notifications_screen';
  
  // Routes de configuration
  static const String bloodDonationProfileSetup = '/onboarding-seven-enhanced-blood-donation-profile-setup';
  static const String apiConfigScreen = '/api-config-screen';

  // Configuration avec protection s√©lective
  static Map<String, WidgetBuilder> get routes => { ... };
}
```

#### Syst√®me de navigation intelligent

L'application utilise un syst√®me de navigation intelligent qui :

1. **D√©termine automatiquement la route initiale** selon l'√©tat d'authentification
2. **Prot√®ge s√©lectivement les routes** qui n√©cessitent une authentification  
3. **G√®re les redirections automatiques** vers la page de connexion
4. **Maintient l'√©tat de navigation** pendant les transitions

## üîÑ Flux de Donn√©es

### 1. **Authentification Flow Avanc√©**

```
User Input ‚Üí Authentication Screen ‚Üí API Service ‚Üí JWT Tokens (Access + Refresh)
                                                     ‚Üì
                              SharedPreferences ‚Üê Token Storage ‚Üê Validation
                                     ‚Üì
                         NavigationHelper.getInitialRoute() ‚Üê AuthService.isLoggedIn()
                                     ‚Üì
                    Main Menu (if authenticated) / Onboarding (if not)
```

### 2. **Auto-Refresh Token Flow**

```
API Request ‚Üí AuthService.getValidAccessToken() ‚Üí Token Validation
                                ‚Üì
                         Token Expired?
                                ‚Üì
           Yes: RefreshToken API ‚Üí New Access Token ‚Üí Continue Request
           No: Use Current Token ‚Üí Continue Request
```

### 3. **Data Flow Pattern avec Protection**

```
UI Widget ‚Üí ProtectedRoute ‚Üí AuthService ‚Üí API Service ‚Üí Backend
    ‚Üë                                           ‚Üì
    ‚îî‚îÄ‚îÄ Update UI ‚Üê Process Response ‚Üê Authentication Check
```

### 4. **Configuration Flow**

```
App Start ‚Üí AppConfig.initialize() ‚Üí .env File ‚Üí API Base URL
                                      ‚Üì
                         ApiConfigScreen ‚Üí User Override ‚Üí SharedPreferences
                                      ‚Üì
                         Dynamic API URL ‚Üí All API Calls
```

## üóÇÔ∏è Structure D√©taill√©e des Dossiers (Mise √† jour)

```
lib/
‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îú‚îÄ‚îÄ app_export.dart           # Exports centralis√©s
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app_config.dart       # Configuration des environnements avec .env
‚îÇ   ‚îú‚îÄ‚îÄ constants/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app_constants.dart    # Constantes globales
‚îÇ   ‚îú‚îÄ‚îÄ navigation_helper.dart    # Helper de navigation et protection des routes
‚îÇ   ‚îî‚îÄ‚îÄ utils/
‚îÇ       ‚îú‚îÄ‚îÄ image_constant.dart   # Constantes d'images
‚îÇ       ‚îî‚îÄ‚îÄ size_utils.dart       # Utilitaires de taille
‚îÇ
‚îú‚îÄ‚îÄ screens/
‚îÇ   ‚îú‚îÄ‚îÄ welcomeScreen/            # Onboarding initial
‚îÇ   ‚îú‚îÄ‚îÄ missionOverviewScreen/    # Pr√©sentation de la mission
‚îÇ   ‚îú‚îÄ‚îÄ gettingStartedScreen/     # Introduction √† l'app
‚îÇ   ‚îú‚îÄ‚îÄ authentication_screen/    # Connexion utilisateur
‚îÇ   ‚îú‚îÄ‚îÄ account_registration_screen/ # Inscription utilisateur
‚îÇ   ‚îú‚îÄ‚îÄ api_config_screen/        # Configuration de l'URL API
‚îÇ   ‚îú‚îÄ‚îÄ appointments_screen/      # Gestion des rendez-vous
‚îÇ   ‚îú‚îÄ‚îÄ blood_donation_profile_setup/ # Configuration du profil donneur avanc√©
‚îÇ   ‚îú‚îÄ‚îÄ blood_volume_visualization/   # Visualisation des dons
‚îÇ   ‚îú‚îÄ‚îÄ donorProfileSetupScreen/  # Configuration du profil donneur (legacy)
‚îÇ   ‚îú‚îÄ‚îÄ blood_donation_menu_screen/   # Menu principal
‚îÇ   ‚îú‚îÄ‚îÄ create_donor_screen/      # Cr√©ation de nouveaux donneurs
‚îÇ   ‚îú‚îÄ‚îÄ donation_campaign_list_screen/ # Gestion des campagnes
‚îÇ   ‚îú‚îÄ‚îÄ blood_collection_centers_locator/ # Localisation des centres
‚îÇ   ‚îú‚îÄ‚îÄ badges_management_screen/ # Gestion des badges et r√©compenses
‚îÇ   ‚îú‚îÄ‚îÄ test_results_history_page/ # Historique des analyses
‚îÇ   ‚îú‚îÄ‚îÄ digital_donor_card/       # Carte num√©rique du donneur
‚îÇ   ‚îú‚îÄ‚îÄ notifications_screen/     # Gestion des notifications
‚îÇ   ‚îî‚îÄ‚îÄ profile_screen/           # Profil utilisateur
‚îÇ
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îú‚îÄ‚îÄ api_service.dart          # Service API principal avec tous les endpoints
‚îÇ   ‚îú‚îÄ‚îÄ auth_service.dart         # Service d'authentification JWT
‚îÇ   ‚îú‚îÄ‚îÄ notification_service.dart # Service de notifications push
‚îÇ   ‚îú‚îÄ‚îÄ registration_data_service.dart # Service de donn√©es d'inscription
‚îÇ   ‚îî‚îÄ‚îÄ api_test_service.dart     # Service de tests API
‚îÇ
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ user.dart                 # Mod√®le utilisateur
‚îÇ   ‚îú‚îÄ‚îÄ donor.dart                # Mod√®le donneur (legacy)
‚îÇ   ‚îú‚îÄ‚îÄ donor_updated.dart        # Mod√®le donneur mis √† jour
‚îÇ   ‚îú‚îÄ‚îÄ campaign.dart             # Mod√®le campagne
‚îÇ   ‚îú‚îÄ‚îÄ badge.dart                # Mod√®le badge
‚îÇ   ‚îú‚îÄ‚îÄ notification.dart         # Mod√®le notification
‚îÇ   ‚îú‚îÄ‚îÄ don.dart                  # Mod√®le don
‚îÇ   ‚îú‚îÄ‚îÄ resultat_analyse.dart     # Mod√®le r√©sultat d'analyse
‚îÇ   ‚îî‚îÄ‚îÄ models.dart               # Export centralis√©
‚îÇ
‚îú‚îÄ‚îÄ widgets/
‚îÇ   ‚îú‚îÄ‚îÄ custom_button.dart
‚îÇ   ‚îú‚îÄ‚îÄ custom_text_input.dart
‚îÇ   ‚îú‚îÄ‚îÄ custom_image_view.dart
‚îÇ   ‚îú‚îÄ‚îÄ custom_input_field.dart
‚îÇ   ‚îú‚îÄ‚îÄ custom_bottom_navigation.dart
‚îÇ   ‚îú‚îÄ‚îÄ modern_app_bar.dart       # Barre d'application moderne
‚îÇ   ‚îú‚îÄ‚îÄ auth_guard.dart           # Protection des routes
‚îÇ   ‚îî‚îÄ‚îÄ state_wrapper.dart        # Wrapper de gestion d'√©tat
‚îÇ
‚îú‚îÄ‚îÄ theme/
‚îÇ   ‚îú‚îÄ‚îÄ theme_helper.dart         # Th√®me principal
‚îÇ   ‚îú‚îÄ‚îÄ text_style_helper.dart    # Styles de texte
‚îÇ   ‚îî‚îÄ‚îÄ custom_button_styles.dart # Styles de boutons
‚îÇ
‚îî‚îÄ‚îÄ routes/
    ‚îî‚îÄ‚îÄ app_routes.dart           # Configuration compl√®te des routes
```

## üéØ Patterns et Principes Utilis√©s

### 1. **Feature-First Architecture**

- Organisation par fonctionnalit√©s plut√¥t que par type de fichier
- Facilite la maintenance et l'√©volution

### 2. **Separation of Concerns**

- UI s√©par√©e de la logique m√©tier
- Services d√©di√©s pour chaque responsabilit√©

### 3. **Reusable Components**

- Widgets personnalis√©s r√©utilisables
- Styles et th√®mes centralis√©s

### 4. **Stateful Management**

- Utilisation de `StatefulWidget` pour la gestion d'√©tat locale
- Services singletons pour l'√©tat global (AuthService)
- `SharedPreferences` pour la persistance des donn√©es
- Cache intelligent pour les donn√©es utilisateur

### 5. **Configuration Dynamique**

- Support complet des fichiers `.env` pour la configuration
- Configuration API modifiable √† l'ex√©cution
- D√©tection automatique d'environnement (dev/staging/prod)
- URLs pr√©d√©finies pour faciliter les tests

### 6. **Gestion d'Erreurs Robuste**

- Logging automatique de toutes les requ√™tes API
- Gestion des erreurs r√©seau avec retry automatique
- Messages d'erreur localis√©s et contextuels
- Validation des donn√©es c√¥t√© client avant envoi

## üîê S√©curit√© et Bonnes Pratiques

### 1. **Authentification Avanc√©e**

- Tokens JWT avec refresh automatique avant expiration
- Stockage s√©curis√© avec `SharedPreferences`
- Validation c√¥t√© client et serveur
- D√©tection automatique de l'expiration
- Gestion des sessions utilisateur persistantes
- Protection automatique des routes sensibles

### 2. **Validation et S√©curit√©**

- Validation des formulaires avec messages d'erreur contextuels
- Sanitisation des entr√©es utilisateur
- Gestion robuste des erreurs r√©seau avec retry
- Validation des tokens JWT c√¥t√© client
- Protection contre les attaques CSRF
- Chiffrement des communications HTTPS

### 3. **Performance et Optimisation**

- Images mises en cache avec `cached_network_image`
- Lazy loading des donn√©es avec pagination
- Cache intelligent des donn√©es utilisateur
- Optimisation des requ√™tes API avec d√©doublonnage
- Compression automatique des images
- Gestion efficace de la m√©moire

## üß™ Architecture de Test (Mise √† jour)

```
test/
‚îú‚îÄ‚îÄ api_integration_test.dart        # Tests d'int√©gration API compl√®te
‚îú‚îÄ‚îÄ backend_connectivity_test.dart   # Tests de connectivit√© backend
‚îú‚îÄ‚îÄ integration_complete_test.dart   # Tests d'int√©gration complets
‚îú‚îÄ‚îÄ validation_simple_test.dart      # Tests de validation simples
‚îú‚îÄ‚îÄ widget_test.dart                # Tests de widgets de base
‚îÇ
‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îî‚îÄ‚îÄ campaign_registration_test.dart # Tests d'inscription aux campagnes
‚îÇ
‚îú‚îÄ‚îÄ validation/
‚îÇ   ‚îî‚îÄ‚îÄ user_story_validation_test.dart # Validation des user stories
‚îÇ
‚îî‚îÄ‚îÄ widget/
    ‚îú‚îÄ‚îÄ donation_campaign_screen_test.dart # Tests √©cran campagnes
    ‚îî‚îÄ‚îÄ notifications_screen_test.dart     # Tests √©cran notifications
```

### Types de tests impl√©ment√©s

1. **Tests d'int√©gration API** : Validation compl√®te des endpoints
2. **Tests de connectivit√©** : V√©rification des connexions backend
3. **Tests de validation** : V√©rification des user stories
4. **Tests de widgets** : Tests unitaires des composants UI
5. **Tests d'int√©gration** : Tests de flux complets utilisateur

## üîÑ CI/CD et D√©ploiement

### Pipeline de D√©veloppement

1. **Development** ‚Üí D√©veloppement local
2. **Testing** ‚Üí Tests automatis√©s
3. **Staging** ‚Üí Tests d'int√©gration
4. **Production** ‚Üí D√©ploiement final

### Environnements

```dart
// Configuration par environnement avec AppConfig
class AppConfig {
  static Future<void> initialize() async {
    await dotenv.load(fileName: '.env');
  }
  
  static String get apiBaseUrl => 
    dotenv.env['API_BASE_URL'] ?? 'http://127.0.0.1:8000/api';
  
  static bool get isProduction => apiBaseUrl.contains('https://');
  static bool get isDevelopment => 
    apiBaseUrl.contains('127.0.0.1') || apiBaseUrl.contains('localhost');
  
  // Configuration dynamique disponible
  static Map<String, String> presetUrls = {
    'Local Django': 'http://localhost:8000/api',
    'Local Django (IP)': 'http://127.0.0.1:8000/api',
    'Staging': 'https://staging-api.blooddonation.com/api',
    'Production': 'https://api.blooddonation.com/api',
  };
}
```

## üìà √âvolutivit√© et Maintenance

### 1. **Ajout de Nouvelles Fonctionnalit√©s**

- Cr√©er un nouveau dossier dans `screens/`
- Ajouter les services n√©cessaires
- Mettre √† jour les routes

### 2. **Modifications de l'API**

- Centralisation dans `api_service.dart`
- Gestion de la r√©trocompatibilit√©
- Tests d'int√©gration

### 3. **Performance Monitoring**

- M√©triques de performance
- Monitoring des erreurs
- Analytics utilisateur

## üÜï Nouvelles Fonctionnalit√©s Ajout√©es

### Configuration API Dynamique
- **√âcran de configuration API** : Interface utilisateur pour modifier l'URL API
- **URLs pr√©d√©finies** : Presets pour d√©veloppement, staging, production
- **Test de connexion** : Validation de la connectivit√© API
- **Persistence** : Sauvegarde automatique des pr√©f√©rences

### Syst√®me de Notifications Push
- **Mod√®le NotificationModel** : Structure compl√®te pour les notifications
- **Types de notifications** : Inscription, rappel, r√©sultat, urgent, information
- **Gestion avanc√©e** : Marquage comme lue, suppression, actions en masse
- **Interface utilisateur** : √âcran d√©di√© avec badges visuels

### Gestion Avanc√©e des Profils
- **Configuration compl√®te** : Setup avanc√© du profil donneur
- **Visualisation des dons** : √âcran de visualisation du volume de sang donn√©
- **Rendez-vous** : Gestion des appointments de don
- **Profil utilisateur** : Interface de gestion du profil personnel

### Services Am√©lior√©s
- **AuthService refactoris√©** : Gestion intelligente des sessions JWT
- **API Service √©tendu** : Support complet des endpoints backend
- **Services auxiliaires** : Notification, registration data, API testing

---
